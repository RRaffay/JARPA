{% extends "base.html" %} {% block content %}
<!-- <form method="GET">
  <input style = "width: 80vw" type="search" class="form-control" placeholder="Search" name="sq" />
  <button style = "float: right;" type="submit" class="btn btn-primary">Search</button>
</form> -->

<form method="GET">
    <input type="search" class="form-control" placeholder="Search" name="sq" />
    <br>
    <button type="submit" class="btn btn-primary">Search</button>
</form>

<br>

{% if current_user.is_authenticated %}
  <a
  href="{{ url_for('index.createProduct') }}" style = "float: right; padding-left: 20px;"
  >
  <button type="submit" class="btn btn-primary">Add Product</button>
  </a>
{% endif %}

<a style = "float: right;" href="{{ url_for('index.categoriesPage') }}"><button type="submit" class="btn btn-primary">See Categories</button></a>

<h2>Available Products:</h2>
{{ pagination.info }} {{ pagination.links }}
<table class="table table-hover table-bordered container">
  <thead class="thead-dark">
    <tr>
      <th scope="col">
        Product Name
        <a href="{{ url_for('index.index',list_sort = 5) }}">&nbsp;⬆</a>
        <a href="{{ url_for('index.index',list_sort = 6) }}">&nbsp;⬇</a>
      </th>
      <th scope="col">
        Price
        <a href="{{ url_for('index.index',list_sort = 1) }}">&nbsp;⬆</a>
        <a href="{{ url_for('index.index',list_sort = 2) }}">&nbsp;⬇</a>
      </th>
      <th scope="col">Description</th>
      <th scope="col">Image</th>
      <th scope="col">
        Average Rating
        <a href="{{ url_for('index.index',list_sort = 4) }}">&nbsp;⬆</a>
        <a href="{{ url_for('index.index',list_sort = 3) }}">&nbsp;⬇</a>
      </th>
      </th>
    </tr>
  </thead>
  <tbody>
    {% for i in range(l) %}
    <tr>
      <td>
        <a
          href="{{url_for('index.ProductPages', productID = avail_products[i][1].pid)}}"
        >
        {{avail_products[i][1].name}}
      </td>
      <td>${{avail_products[i][1].price}}</td>
      <td>{{avail_products[i][1].description[:-1]}}</td>
      <td><img src="{{avail_products[i][1].image}}" alt="Product Image" style="width: 50px; height: 50px;";/></td>
      <td>{% for n in range(avail_products[i][0]) %} &#9733; {% endfor %} {% for n in
        range(5-avail_products[i][0]) %} &#9734; {% endfor %}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{{ pagination.info }} {{ pagination.links }}
<!-- <br /><br />
{% if current_user.is_authenticated %}
<h2>Your recent purchases:</h2>
<table class="table table-hover table-bordered container">
  <thead class="thead-dark">
    <tr>
      <th scope="col">Purchase ID</th>
      <th scope="col">Product Name</th>
      <th scope="col">Price</th>
    </tr>
  </thead>
  <tbody>
    {% for purchase in purchase_history%}
    <tr>
      <th scope="row">{{purchase.id}}</th>
      <td>{{purchase.pid}}</td>
      <td>{{purchase.time_purchased}}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% else %}
<p>
  <a href="{{ url_for('users.login') }}">Log in</a> to see your purchase
  history!
</p>
{% endif %} -->

{% endblock %}
